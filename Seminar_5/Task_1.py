import numpy as np
import scipy.stats as stats

# Задача 1: Когда используется критерий Стьюдента, а когда Z-критерий?

# Объяснение:
# Z-критерий используется, когда:
# 1. Выборка большая (n > 30).
# 2. Дисперсия генеральной совокупности известна.

# Критерий Стьюдента (t-критерий) используется, когда:
# 1. Выборка маленькая (n <= 30).
# 2. Дисперсия генеральной совокупности неизвестна и заменяется выборочной дисперсией.
# Этот критерий учитывает дополнительную неопределенность, связанную с оценкой дисперсии.

# Задача 2: Тест гипотезы о диаметре шариков

# Дано:
mu_0 = 17  # Гипотетическое среднее значение
n = 100  # Объем выборки
sample_mean = 17.5  # Среднее значение выборки
var = 4  # Дисперсия
alpha = 0.05  # Уровень значимости

# Z-критерий, так как известна дисперсия и выборка большая
sigma = np.sqrt(var)
z_statistic = (sample_mean - mu_0) / (sigma / np.sqrt(n))

# Критическое значение для одностороннего теста
z_critical = stats.norm.ppf(1 - alpha)

# Сравнение Z-статистики и критического значения
if z_statistic > z_critical:
    conclusion_2 = "Отвергаем нулевую гипотезу"
else:
    conclusion_2 = "Не отвергаем нулевую гипотезу"

print(f"Задача 2: Z-статистика = {z_statistic}, Z-критическое = {z_critical}, Вывод: {conclusion_2}")

# Задача 3: Тест гипотезы о весе пачки печенья

# Дано:
sample_weights = np.array([202, 203, 199, 197, 195, 201, 200, 204, 194, 190])
mu_0 = 200  # Гипотетическое среднее значение
n = len(sample_weights)  # Объем выборки
alpha = 0.01  # Уровень значимости (99% доверие)

# Критерий Стьюдента (t-критерий), так как выборка маленькая и дисперсия неизвестна
sample_mean = np.mean(sample_weights)
sample_std = np.std(sample_weights, ddof=1)  # Выборочное стандартное отклонение
t_statistic = (sample_mean - mu_0) / (sample_std / np.sqrt(n))

# Критическое значение для двустороннего теста
t_critical = stats.t.ppf(1 - alpha/2, df=n-1)

# Сравнение T-статистики и критического значения
if abs(t_statistic) > t_critical:
    conclusion_3 = "Отвергаем нулевую гипотезу"
else:
    conclusion_3 = "Не отвергаем нулевую гипотезу"

print(f"Задача 3: T-статистика = {t_statistic}, T-критическое = {t_critical}, Вывод: {conclusion_3}")

# Задача 4: Тест на статистически значимые различия в росте матерей и дочерей

# Дано:
mother_heights = np.array([172, 177, 158, 170, 178, 175, 164, 160, 169, 165])
daughter_heights = np.array([173, 175, 162, 174, 175, 168, 155, 170, 160])

# T-критерий для двух независимых выборок
t_statistic, p_value = stats.ttest_ind(mother_heights, daughter_heights)

# Уровень значимости
alpha = 0.05

if p_value < alpha:
    conclusion_4 = "Есть статистически значимые различия"
else:
    conclusion_4 = "Нет статистически значимых различий"

print(f"Задача 4: T-статистика = {t_statistic}, p-value = {p_value}, Вывод: {conclusion_4}")

